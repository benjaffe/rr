<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>R&amp;R - Udacity</title>
  <link rel="stylesheet" href="https://www.udacity.com/media/css/udacity/udacity.min.css">
  <link rel="stylesheet" href="css/style.css">
</head>
<body>

  <!-- Heading -->
  <div class="row section-inverse section-inverse-standout text-inverse">
    <div class="col-xs-12">
      <h2 class="text-center" data-bind="text: currentPage().name"></h2>
      <p class="text-center" data-bind="text: currentPage().description"></p>
    </div>
  </div>
  <div class="row row-gap-large"></div>

  <!-- Nav -->
  <!-- <p>Current:
    <span data-bind="text: pageHierarchy().join(' - ')" style="font-style:italic;"></span>
  </p> -->

  <div data-bind="template: {if: currentPage().introVideo, name: 'video-modal-template'}"></div>
  <div data-bind="template: {if: currentPage().navigateTo, name: 'iframe-modal-template'}"></div>

  <!-- List of subcategories -->
  <div class="children" data-bind="with: currentPage, visible: displayChildren">
    <ul data-bind="template: {name: 'category-view'}"></ul>
  </div>

  <!-- Item info -->
  <div class="item" data-bind="with: currentPage, visible: displayItem">
    <ul data-bind="template: {name: 'item-view'}"></ul>
  </div>

  <div class="container" data-bind="visible: currentPage().url">
    <h3 class="text-center">Navigating to the Article</h3>
    <p class="text-center">Please stand by...</p>
  </div>

  <hr style="margin-top:1000px;">

  <div data-bind="foreach: pageHierarchyObjects()" style="opacity: 0.4;">
    <div data-bind="template: {if: type === 'category', name: 'category-view'}"></div>
    <div data-bind="template: {if: type === 'item', name: 'item-view'}"></div>
    <hr>
  </div>


  <script type="text/html" id="category-view">
    <div class="container">
      <div class="row">
        <div class="col-sm-10 col-sm-offset-1 col-md-8 col-md-offset-2">
          <ul class="nav nav-pills nav-stacked subject-list" data-bind="foreach: childrenArr">
            <li class="subject-list-item">
              <a data-bind="attr: {href: $root.getUrl($data)}">
                <h3 class="text-left h-slim-top" data-bind="text: name"></h3>
                <!-- ko if: $data && $data.description -->
                <p class="text-left" data-bind="text: description"></p>
                <!-- /ko -->
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </script>

  <script type="text/html" id="item-view">
    <div class="container" data-bind="visible: pageState().linkVisited">
      <div class="row">
        <div class="col-sm-10 col-sm-offset-1 col-md-8 col-md-offset-2">
          <h3 class="text-left h-slim-top" data-bind="text: name"></h3>
          <!-- ko if: $data && $data.description -->
          <p class="text-left" data-bind="text: description"></p>
          <!-- /ko -->
        </div>
      </div>
    </div>
  </script>

  <script type="text/html" id="video-modal-template">
    <div class="modal fade" id="video-modal">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <!-- TODO Bindings Broken --><h4 class="modal-title" data-bind="currentPage().introVideo.name()"></h4>
            <!-- TODO Bindings Broken --><p class="modal-description" data-bind="currentPage().introVideo.description()"></p>
          </div>
          <div class="modal-body">
            <div id="youtube-player"></div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            <button type="button" class="btn btn-primary">Save changes</button>
          </div>
        </div>
      </div>
    </div>
  </script>

  <script type="text/html" id="iframe-modal-template">
    <div class="modal fade iframe-modal" id="iframe-modal">
      <div class="modal-dialog">
        <div class="modal-content" data-bind="with: currentPage">
          <div class="modal-body">
            <div class="row-gap-huge"></div>
            <div class="text-center">
              <h3>The article couldn't load</h3>
              <p>Click on the article link below, then return to this page when you're done.</p>
            </div>
            <iframe id="iframe" width="400" height="400" data-bind="attr: {src: navigateTo}" frameborder="0"></iframe>
          </div>
          <div class="modal-footer">
            <h3 class="text-left h-slim-top text-center"><a data-bind="text: name, attr: {href: navigateTo}" target="_blank"></a></h3>
            <button type="button" class="btn btn-default" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">I'm Done Reading</span></button>
          </div>
        </div>
      </div>
    </div>
  </script>

  <!-- <div data-bind="text: rr.utils.stringify()"></div> -->

  <!-- TODO - Use CDN for Libraries -->
  <script src="lib/jquery.js"></script>
  <script src="lib/bootstrap.js"></script>
  <script src="lib/knockout.js"></script>
  <script src="https://www.youtube.com/iframe_api"></script>
  <script src="lib/small-libs.js"></script>
  <script src="lib/knockout.mapping-latest.js"></script>
  <script src="js/models/page.js"></script>
  <script src="js/storage.js"></script>
  <script src="js/page-actions.js"></script>
  <script src="js/routes.js"></script>
  <script src="app.js"></script>

</body>
</html>
